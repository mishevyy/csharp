# Побитовые операции

## Конъюнкция (Логическое И) Conjunction

Таблица истинности для операций Конъюнкции (И) - & - [AND]

Если хоть один из операндов имеет значение 0 - вся конструкция имеет значение 0. Иначе - 1

0 & 0 = 0         1 & 0 = 0

0 & 1 = 0         1 & 1 = 1

```c#
int operand1 = 0xFF;                        // [1111 1111 Bin] = [FF Hex] = [255 Dec]   
int operand2 = 0x01;                        // [0000 0001 Bin] = [01 Hex] = [01 Dec]
int result = operand1 & operand2;           // [0000 0001 Bin] = [01 Hex] = [01 Dec]
Console.WriteLine("Конъюнкция(Логическое И)");
Console.WriteLine("{0} AND {1} = {2}", operand1, operand2, result);
```

## Дизъюнкция (Логическое ИЛИ) Disjunction

Таблица истинности для Дизъюнкции(ИЛИ) - | - [OR]

Если хоть один из операндов имеет значение 1 - вся конструкция имеет значение 1. Иначе - 0

0 | 0 = 0         1 | 0 = 1

0 | 1 = 1         1 | 1 = 1

```c#
int operand1 = 0x02;                          // [0000 0010 Bin] = [02 Hex] = [02 Dec]            
int operand2 = 0x01;                          // [0000 0001 Bin] = [01 Hex] = [01 Dec]
int result = operand1 | operand2;             // [0000 0011 Bin] = [03 Hex] = [03 Dec]
Console.WriteLine("Дизъюнкция(Логическое ИЛИ)");
Console.WriteLine("{0} OR {1} = {2}", operand1, operand2, result);
```

## Исключающее ИЛИ ExclusiveXOR

Таблица истинности для Исключающего ИЛИ - ^ - [XOR]

Если операнды имеют одинаковое значение - результат операции 0, если операнды разные - 1

0 ^ 0 = 0         1 ^ 0 = 1

1 ^ 1 = 0         0 ^ 1 = 1

```c#
int operand1 = 0x03;                          // [0000 0011 Bin] = [03 Hex] = [03 Dec]            
int operand2 = 0x01;                          // [0000 0001 Bin] = [01 Hex] = [01 Dec]
int result = operand1 ^ operand2;             // [0000 0010 Bin] = [02 Hex] = [02 Dec]
Console.WriteLine("Исключающее ИЛИ");
Console.WriteLine("{0} XOR {1} = {2}", operand1, operand2, result);
```

## Отрицание Negation

Таблица истинности для Отрицания (НЕТ) - ~ - [NOT]

~ 0  = 1    [0000 0001] = [01 Dec]

~ 1  = 0    [1111 1110] = [-2 Dec]

```c#  
int operand1 = 0x01;
int result = ~operand1;
Console.WriteLine("Отрицание");
Console.WriteLine("NOT {0} = {1}", operand1, result);
```

## Логический сдвиг (Shift) Logically Shift

```c#
byte operand = 0x81;
Console.WriteLine("Число до сдвига {0:X}", operand);

// Логичский сдивг влево
operand = (byte)(operand << 2);
Console.WriteLine("Число после сдвига влево {0:X}", operand);

// Логический сдвиг вправо
operand = (byte)(operand >> 1);
Console.WriteLine("Число после сдвига вправо {0:X}", operand);
```

## Применение побитовых операции

## Операции (&, |)

Мы имеем порт ввода/вывода или регистр с определенным значением в нем.
Нам необходимо включить устройство управляемое первым битом, установив первый бит в 1.
После нам потребуется выключить устройство, сбросив первый бит в 0.

1 1 1 1   0 0 0 0  -  начальное значение порта ввода/вывода.

7 6 5 4   3 2 1 0  -  нумерация битов управления устройствами.

```c#
byte port = 0xF0;               // 1 1 1 1   0 0 0 0  -  начальное значение порта ввода/вывода.
byte maskOn = 0x02;             // 0 0 0 0   0 0 1 0  -  маска включения устройства управляемого первым битом.
byte maskOff = 0xFD;            // 1 1 1 1   1 1 0 1  -  Создаем маску выключения устройства управляемого первым битом. 

Console.WriteLine("port = {0:X}", port);    // Начальное состояние порта.

port = (byte)(port | maskOn);               // Включить устройство управляемое первым битом.
Console.WriteLine("port = {0:X}", port);

port = (byte)(port & maskOff);              // Выключить устройство управляемое первым битом.
Console.WriteLine("port = {0:X}", port);
```

***

## Операция (^)

Используя операцию `XOR`, мы можем зашифровать сообщение.
В таком виде шифрования используется один ключ, как для шифрования, так и для расшифровки.
Криптостойкость такого ключа, можно увеличить, если увеличить его длину.

```c#
ushort key = 0x0088; // Секретный ключ (длина - 16 bit).
char character = 'A'; // Символ для шифрования;

Console.WriteLine("Исходный символ: {0}, его код в кодовой таблице: {1:X}", character, (byte)character);
Console.WriteLine("Размер символа: {0} = {1} бит", character, sizeof(char) * 8);

// Шифрование символа.
character = (char)(character ^ key);
Console.WriteLine("Зашифрованный символ: {0}, его код в кодовой таблице: {1:X}", character, (byte)character);

// Дешифрование символа.
character = (char)(character ^ key);
Console.WriteLine("Зашифрованный символ: {0}, его код в кодовой таблице: {1:X}", character, (byte)character);
```
